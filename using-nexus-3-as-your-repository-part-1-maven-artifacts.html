<!DOCTYPE html><html><head><meta charSet="utf-8"/><title>Using Nexus 3 as Your Repository - Part 1: Maven Artifacts</title><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-154633858-1"></script><script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-154633858-1');
</script><link href="//fonts.googleapis.com/css?family=Merriweather:900,900italic,300,300italic" rel="stylesheet" type="text/css"/><link rel="canonical" href="https://rafaeleyng.github.io//using-nexus-3-as-your-repository-part-1-maven-artifacts"/><meta name="description" content=""/><meta name="language" content="en"/><meta name="content-language" content="en"/><meta name="author" content="Rafael Eyng"/><meta name="keywords" content="software, development, javascript, github, node, docker, blog"/><meta name="viewport" content="width=device-width, initial-scale=1"/><meta name="next-head-count" content="11"/><link rel="preload" href="/_next/static/oZ4QsuvSe1R-aGNaismwu/pages/post.js" as="script"/><link rel="preload" href="/_next/static/oZ4QsuvSe1R-aGNaismwu/pages/_app.js" as="script"/><link rel="preload" href="/_next/static/runtime/webpack-9369c5c69dbf6d4912cb.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.bc93fc63b1408a8cadb6.js" as="script"/><link rel="preload" href="/_next/static/runtime/main-b1511fc684da8c38d25b.js" as="script"/><link rel="preload" href="/_next/static/css/commons.1c2d60be.chunk.css" as="style"/><link rel="stylesheet" href="/_next/static/css/commons.1c2d60be.chunk.css"/></head><body><div id="__next"><div class="container"><header class="site-header single-column"><a class="blog-title" href="/">Rafael Eyng&#x27;s Blog</a><nav class="blog-menu"><a href="https://rafaeleyng.github.io/me" target="_blank">About</a><a href="https://github.com/rafaeleyng/rafaeleyng.github.io" target="_blank">Github</a></nav></header></div><header class="page-header"><div class="container single-column"><h1>Using Nexus 3 as Your Repository - Part 1: Maven Artifacts</h1><p class="post-meta"><time itemProp="datePublished" dateTime="2016-11-23">Nov 23, 2016</time></p></div></header><main class="container single-column"><section class="post"><span class="hidden" itemProp="publisher">Rafael Eyng</span><span class="hidden" itemProp="keywords">nexus, repository, private, proxy, maven</span><article class="post-content" itemProp="articleBody"><div><small>
This is the first part of a series of posts on Nexus 3 and how to use it as repository for several technologies.
</small></div><h2>Installation</h2><p>Install it with docker:</p><pre><code>docker run -d -p 8081:8081 -p 8082:8082 -p 8083:8083 --name my-nexus sonatype/nexus3:3.0.0</code></pre><div><small>
We are mapping all of those ports (8081-8083) because of the next posts in the series. For this post, we'll actually only need port 8081.
</small></div><p>Nexus 3 will go up on port 8081. Default credentials are admin/admin123.</p><p>You might want to create a volume to map the Nexus data folder to your host, adding the option <code>-v /opt/my-nexus-data:/nexus-data</code>.</p><h2>Configuring Nexus as a Maven repo</h2><p>What we will do:</p><ul><li>create a private (hosted) repository for our snapshots</li><li>create a private (hosted) repository for our releases</li><li>create a proxy repository pointing to Maven Central</li><li>create a group repository to provide all of these repos under a single URL</li></ul><p>I suggest you to create a new blob store for each new repo you want to create. That way, the data for every repo will be in a different folder in <code>/nexus-data</code> (inside the Docker container). But this is not mandatory for it to work.</p><h3>snapshots repo</h3><p>A repository for Maven artifacts that you deploy <strong>with</strong> <code>-SNAPSHOT</code> in the end of the version tag of your pom.xml:</p><pre><code>&lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;</code></pre><p>Create a new maven (hosted) repository and configure it like:</p><p><img alt="maven-snapshots0" src="https://cloud.githubusercontent.com/assets/4842605/20580349/f43cdad8-b1b8-11e6-8ff8-a9a02082197a.png"/></p><h3>releases repo</h3><p>A repository for Maven artifact that you deploy <strong>without</strong> <code>-SNAPSHOT</code> in the end of the version tag of your pom.xml:</p><pre><code>&lt;version&gt;1.0.0&lt;/version&gt;</code></pre><p>Create a new maven (hosted) repository and configure it like:</p><p><img alt="maven-releases0" src="https://cloud.githubusercontent.com/assets/4842605/20580348/f42e9964-b1b8-11e6-8e32-4a0dc717d7bf.png"/></p><h3>proxy to Maven Central repo</h3><p>A repository that proxies everything you download from Maven Central. Next time you download the same dependency, it will be cached in your Nexus.</p><p>Create a new maven (proxy) repository and configure it like:</p><p><img alt="maven-central0" src="https://cloud.githubusercontent.com/assets/4842605/20580346/f40f4488-b1b8-11e6-8fce-33034ef14978.png"/></p><p><img alt="maven-central1" src="https://cloud.githubusercontent.com/assets/4842605/20580345/f40e387c-b1b8-11e6-8e4a-c314273bf1a0.png"/></p><h3>group repo</h3><p>This will group all the above repos and provide you a single URL to configure your clients to download from/deploy to.</p><p>Create a new maven (group) repository and configure it like:</p><p><img alt="maven-group0" src="https://cloud.githubusercontent.com/assets/4842605/20580347/f427ce5e-b1b8-11e6-8a93-52cda1f49f59.png"/></p><p>You can create as many repos as you need (like proxies to other public repos) and group them all in the group repo.</p><h2>Configuring your clients and projects to use your Nexus repos</h2><p>Put this in your <code>~/.m2/settings.xml</code> file. This will configure the credentials to publish to your hosted repos, and will tell your <code>mvn</code> to use your repo as a mirror of central:</p><pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;settings xmlns=&quot;http://maven.apache.org/SETTINGS/1.1.0&quot;
  xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
  xsi:schemaLocation=&quot;http://maven.apache.org/SETTINGS/1.1.0 http://maven.apache.org/xsd/settings-1.1.0.xsd&quot;&gt;

  &lt;servers&gt;
    &lt;server&gt;
      &lt;id&gt;nexus-snapshots&lt;/id&gt;
      &lt;username&gt;admin&lt;/username&gt;
      &lt;password&gt;admin123&lt;/password&gt;
    &lt;/server&gt;
    &lt;server&gt;
      &lt;id&gt;nexus-releases&lt;/id&gt;
      &lt;username&gt;admin&lt;/username&gt;
      &lt;password&gt;admin123&lt;/password&gt;
    &lt;/server&gt;
  &lt;/servers&gt;

  &lt;mirrors&gt;
    &lt;mirror&gt;
      &lt;id&gt;central&lt;/id&gt;
      &lt;name&gt;central&lt;/name&gt;
      &lt;url&gt;http://your-host:8081/repository/maven-group/&lt;/url&gt;
      &lt;mirrorOf&gt;*&lt;/mirrorOf&gt;
    &lt;/mirror&gt;
  &lt;/mirrors&gt;

&lt;/settings&gt;</code></pre><p>And now configure your projects.</p><p>If you want only to download dependencies from Nexus, put this in the <code>pom.xml</code>:</p><pre><code>&lt;project ...&gt;

  ...

  &lt;repositories&gt;
    &lt;repository&gt;
      &lt;id&gt;maven-group&lt;/id&gt;
      &lt;url&gt;http://your-host:8081/repository/maven-group/&lt;/url&gt;
    &lt;/repository&gt;
  &lt;/repositories&gt;
&lt;/project&gt;</code></pre><p>And if you want also to publish your project, add:</p><pre><code>&lt;project ...&gt;

  ...

  &lt;distributionManagement&gt;
    &lt;snapshotRepository&gt;
      &lt;id&gt;nexus-snapshots&lt;/id&gt;
      &lt;url&gt;http://your-host:8081/repository/maven-snapshots/&lt;/url&gt;
    &lt;/snapshotRepository&gt;
    &lt;repository&gt;
      &lt;id&gt;nexus-releases&lt;/id&gt;
      &lt;url&gt;http://your-host:8081/repository/maven-releases/&lt;/url&gt;
    &lt;/repository&gt;
  &lt;/distributionManagement&gt;
&lt;/project&gt;</code></pre><p>Now if you run in your projects:</p><pre><code>mvn install
# or
mvn deploy</code></pre><p>your <code>mvn</code> will point to your Nexus instance.</p></article><div id="disqus_thread"></div><script type="text/javascript">
var disqus_config = function () {
  this.page.url = 'https://rafaeleyng.github.io/using-nexus-3-as-your-repository-part-1-maven-artifacts';
  this.page.identifier = '/using-nexus-3-as-your-repository-part-1-maven-artifacts';
};

(function() { // DON'T EDIT BELOW THIS LINE
  var d = document, s = d.createElement('script');
  s.src = 'https://rafaeleyng.disqus.com/embed.js';
  s.setAttribute('data-timestamp', +new Date());
  (d.head || d.body).appendChild(s);
})();
</script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript></section></main></div><script id="__NEXT_DATA__" type="application/json">{"dataManager":"[]","props":{"pageProps":{"post":{"document":{"content":"\n\u003csmall\u003e\nThis is the first part of a series of posts on Nexus 3 and how to use it as repository for several technologies.\n\u003c/small\u003e\n\n## Installation\n\nInstall it with docker:\n\n```\ndocker run -d -p 8081:8081 -p 8082:8082 -p 8083:8083 --name my-nexus sonatype/nexus3:3.0.0\n```\n\n\u003csmall\u003e\nWe are mapping all of those ports (8081-8083) because of the next posts in the series. For this post, we'll actually only need port 8081.\n\u003c/small\u003e\n\nNexus 3 will go up on port 8081. Default credentials are admin/admin123.\n\nYou might want to create a volume to map the Nexus data folder to your host, adding the option `-v /opt/my-nexus-data:/nexus-data`.\n\n## Configuring Nexus as a Maven repo\n\nWhat we will do:\n  - create a private (hosted) repository for our snapshots\n  - create a private (hosted) repository for our releases\n  - create a proxy repository pointing to Maven Central\n  - create a group repository to provide all of these repos under a single URL\n\nI suggest you to create a new blob store for each new repo you want to create. That way, the data for every repo will be in a different folder in `/nexus-data` (inside the Docker container). But this is not mandatory for it to work.\n\n### snapshots repo\n\nA repository for Maven artifacts that you deploy **with** `-SNAPSHOT` in the end of the version tag of your pom.xml:\n\n```\n\u003cversion\u003e1.0.0-SNAPSHOT\u003c/version\u003e\n```\n\nCreate a new maven (hosted) repository and configure it like:\n\n![maven-snapshots0](https://cloud.githubusercontent.com/assets/4842605/20580349/f43cdad8-b1b8-11e6-8ff8-a9a02082197a.png)\n\n### releases repo\n\nA repository for Maven artifact that you deploy **without** `-SNAPSHOT` in the end of the version tag of your pom.xml:\n\n```\n\u003cversion\u003e1.0.0\u003c/version\u003e\n```\n\nCreate a new maven (hosted) repository and configure it like:\n\n![maven-releases0](https://cloud.githubusercontent.com/assets/4842605/20580348/f42e9964-b1b8-11e6-8e32-4a0dc717d7bf.png)\n\n### proxy to Maven Central repo\n\nA repository that proxies everything you download from Maven Central. Next time you download the same dependency, it will be cached in your Nexus.\n\nCreate a new maven (proxy) repository and configure it like:\n\n![maven-central0](https://cloud.githubusercontent.com/assets/4842605/20580346/f40f4488-b1b8-11e6-8fce-33034ef14978.png)\n\n![maven-central1](https://cloud.githubusercontent.com/assets/4842605/20580345/f40e387c-b1b8-11e6-8e4a-c314273bf1a0.png)\n\n### group repo\n\nThis will group all the above repos and provide you a single URL to configure your clients to download from/deploy to.\n\nCreate a new maven (group) repository and configure it like:\n\n![maven-group0](https://cloud.githubusercontent.com/assets/4842605/20580347/f427ce5e-b1b8-11e6-8a93-52cda1f49f59.png)\n\nYou can create as many repos as you need (like proxies to other public repos) and group them all in the group repo.\n\n\n## Configuring your clients and projects to use your Nexus repos\n\nPut this in your `~/.m2/settings.xml` file. This will configure the credentials to publish to your hosted repos, and will tell your `mvn` to use your repo as a mirror of central:\n\n```\n\u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e\n\u003csettings xmlns=\"http://maven.apache.org/SETTINGS/1.1.0\"\n  xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n  xsi:schemaLocation=\"http://maven.apache.org/SETTINGS/1.1.0 http://maven.apache.org/xsd/settings-1.1.0.xsd\"\u003e\n\n  \u003cservers\u003e\n    \u003cserver\u003e\n      \u003cid\u003enexus-snapshots\u003c/id\u003e\n      \u003cusername\u003eadmin\u003c/username\u003e\n      \u003cpassword\u003eadmin123\u003c/password\u003e\n    \u003c/server\u003e\n    \u003cserver\u003e\n      \u003cid\u003enexus-releases\u003c/id\u003e\n      \u003cusername\u003eadmin\u003c/username\u003e\n      \u003cpassword\u003eadmin123\u003c/password\u003e\n    \u003c/server\u003e\n  \u003c/servers\u003e\n\n  \u003cmirrors\u003e\n    \u003cmirror\u003e\n      \u003cid\u003ecentral\u003c/id\u003e\n      \u003cname\u003ecentral\u003c/name\u003e\n      \u003curl\u003ehttp://your-host:8081/repository/maven-group/\u003c/url\u003e\n      \u003cmirrorOf\u003e*\u003c/mirrorOf\u003e\n    \u003c/mirror\u003e\n  \u003c/mirrors\u003e\n\n\u003c/settings\u003e\n```\n\nAnd now configure your projects.\n\nIf you want only to download dependencies from Nexus, put this in the `pom.xml`:\n\n```\n\u003cproject ...\u003e\n\n  ...\n\n  \u003crepositories\u003e\n    \u003crepository\u003e\n      \u003cid\u003emaven-group\u003c/id\u003e\n      \u003curl\u003ehttp://your-host:8081/repository/maven-group/\u003c/url\u003e\n    \u003c/repository\u003e\n  \u003c/repositories\u003e\n\u003c/project\u003e\n```\n\nAnd if you want also to publish your project, add:\n\n```\n\u003cproject ...\u003e\n\n  ...\n\n  \u003cdistributionManagement\u003e\n    \u003csnapshotRepository\u003e\n      \u003cid\u003enexus-snapshots\u003c/id\u003e\n      \u003curl\u003ehttp://your-host:8081/repository/maven-snapshots/\u003c/url\u003e\n    \u003c/snapshotRepository\u003e\n    \u003crepository\u003e\n      \u003cid\u003enexus-releases\u003c/id\u003e\n      \u003curl\u003ehttp://your-host:8081/repository/maven-releases/\u003c/url\u003e\n    \u003c/repository\u003e\n  \u003c/distributionManagement\u003e\n\u003c/project\u003e\n```\n\nNow if you run in your projects:\n\n```\nmvn install\n# or\nmvn deploy\n```\n\nyour `mvn` will point to your Nexus instance.\n","data":{"title":"Using Nexus 3 as Your Repository - Part 1: Maven Artifacts","date":"2016-11-23T21:55:08.000Z","keywords":"nexus, repository, private, proxy, maven","excerpt":"Learn how to setup Nexus 3 and configure it to use it both as a Maven private repository and as a proxy to Maven Central and other repos\n"}},"slug":"using-nexus-3-as-your-repository-part-1-maven-artifacts"}}},"page":"/post","query":{"slug":"using-nexus-3-as-your-repository-part-1-maven-artifacts"},"buildId":"oZ4QsuvSe1R-aGNaismwu","nextExport":true}</script><script nomodule="" src="/_next/static/runtime/polyfills-a89f9ba1997a5c81dcc9.js"></script><script async="" data-next-page="/post" src="/_next/static/oZ4QsuvSe1R-aGNaismwu/pages/post.js"></script><script async="" data-next-page="/_app" src="/_next/static/oZ4QsuvSe1R-aGNaismwu/pages/_app.js"></script><script src="/_next/static/runtime/webpack-9369c5c69dbf6d4912cb.js" async=""></script><script src="/_next/static/chunks/commons.bc93fc63b1408a8cadb6.js" async=""></script><script src="/_next/static/runtime/main-b1511fc684da8c38d25b.js" async=""></script></body></html>